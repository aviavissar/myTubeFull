{"ast":null,"code":"import _styled from \"styled-components\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\AVIA\\\\Desktop\\\\youTubeNew\\\\myTubeFull\\\\client\\\\src\\\\view\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport searchYoutube from \"youtube-api-v3-search\";\nimport VideoScreen from \"./VideoScreen\";\nimport Search from \"./Search\";\nimport LogIn from \"./LogIn\";\nimport SignIn from \"./SignIn\";\nimport VideoList from \"./VideoList\";\nimport CategoryCreator from \"./CategoryCreator\";\nimport { BACKGROUND, FOOTER_BACKGROUND, BORDER } from \"../styles/colors\";\nimport { useStore } from \"../state/YouTube.store\";\nimport { login, logout, getCatagories, createCategory } from \"../service/fetchApi\";\nconst KEY = process.env.REACT_APP_YOUTUBE_KEY || process.env.REACT_APP_YOUTUBE_KEY2;\n\nconst App = () => {\n  _s();\n\n  const {\n    videos,\n    setvideos,\n    selectedVideo,\n    setCatagories,\n    catagories,\n    setSelectedVideo,\n    selectedCategory,\n    setSelectedCategory,\n    userProfile,\n    isConnected,\n    userToken,\n    setUserToken,\n    setIsConnected,\n    setUserProfile\n  } = useStore();\n  const [errMesg, setErrMesg] = useState(\"\");\n  console.log(KEY);\n\n  const handleFetch = async query => {\n    const options = {\n      q: query,\n      part: \"snippet\",\n      type: \"video\",\n      maxResults: 10\n    };\n    console.log(query.length);\n\n    try {\n      if (query.length > 1) {\n        let result = await searchYoutube(KEY, options);\n        console.log(result);\n        setvideos(result.items);\n      }\n    } catch (e) {\n      console.log(e);\n\n      if (e.error.code === 403) {\n        alert(\"you exceeded your search try tomorrow \");\n      }\n    }\n  };\n\n  const doLogIn = async (email, password) => {\n    const res = await login(email, password);\n\n    if (res.data) {\n      const {\n        data,\n        status\n      } = await res;\n      setUserToken(data.token);\n      setUserProfile({ ...data.user\n      });\n      setIsConnected(status === 200);\n      setErrMesg(\"\");\n      const arr = await getCatagories(data.token);\n\n      if (arr.length === 0) {\n        await createCategory(data.token, {\n          cat_name: \"You Tube links\",\n          videos: []\n        });\n      }\n\n      let catArr = await getCatagories(data.token);\n      setCatagories(catArr);\n      console.log(catArr);\n      setSelectedCategory(catArr[0]._id);\n      return true;\n    } else {\n      setErrMesg(res.message);\n      return false;\n    }\n  };\n\n  const doLogout = async () => {\n    await logout(userToken);\n    setIsConnected(false);\n    setUserToken(null);\n    setUserProfile(null);\n    setCatagories([]);\n  };\n\n  return /*#__PURE__*/React.createElement(Page, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(LoginPanel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, isConnected ? null : /*#__PURE__*/React.createElement(SignIn, {\n    doLogIn,\n    isConnected: false,\n    title: \"SignUp\",\n    setUserProfile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(LogIn, {\n    userProfile,\n    isConnected,\n    userToken,\n    setUserToken,\n    setIsConnected,\n    setUserProfile,\n    doLogIn,\n    doLogout,\n    errMesg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }), isConnected ? /*#__PURE__*/React.createElement(SignIn, {\n    doLogIn,\n    isConnected: true,\n    title: \"edit profile\",\n    userProfile,\n    userToken,\n    setUserProfile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }) : null), /*#__PURE__*/React.createElement(SearchDiv, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    videosQuery: videos,\n    handleFormSubmit: handleFetch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Logo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, \"AviTube\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 18\n    }\n  }, \"everywhere\"))), /*#__PURE__*/React.createElement(Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Screen, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(VideoScreen, {\n    selectedVideo,\n    setCatagories,\n    selectedCategory,\n    catagories,\n    userToken,\n    isConnected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(ListBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(VideoList, {\n    catagories,\n    setSelectedVideo,\n    setCatagories,\n    userToken,\n    isConnected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CategoryDiv, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CategoryCreator, {\n    catagories,\n    setCatagories,\n    selectedCategory,\n    setSelectedCategory,\n    userToken,\n    isConnected,\n    selectedVideo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }))));\n};\n\n_s(App, \"pd+X+POXXNaFPbPYudMVpklqG5M=\", false, function () {\n  return [useStore];\n});\n\n_c = App;\nexport default App;\n\nconst Page = _styled.div.withConfig({\n  displayName: \"App__Page\",\n  componentId: \"sc-64grnh-0\"\n})([\"margin:0px auto 0 auto;height:100%;width:1200px;@media only screen and (max-width:414px){width:394px;}@media only screen and (max-width:375px){width:355px;}@media only screen and (max-width:360px){width:340px;}\"]);\n\nconst Logo = _styled.div.withConfig({\n  displayName: \"App__Logo\",\n  componentId: \"sc-64grnh-1\"\n})([\"padding:10px;font-family:fantasy;letter-spacing:5px;color:red;font-size:30px;span{color:#000;}@media only screen and (max-width:414px){display:flex;flex-direction:column;font-size:0.55em;letter-spacing:1px;padding:3px;padding-top:10px;font-weight:bold;margin:4px -1px 4px 2px;padding-right:10px;line-height:1;font-family:monospace;span{color:#000;font-size:8px;font-weight:normal;}}\"]);\n\nconst Header = _styled.div.withConfig({\n  displayName: \"App__Header\",\n  componentId: \"sc-64grnh-2\"\n})([\"height:64px;padding:14px 20px 7px 20px;display:flex;justify-content:space-between;@media only screen and (max-width:414px){height:50px;padding:10px 5px;border-bottom:1px solid \", \";}@media only screen and (max-width:360px){}\"], BORDER);\n\nconst Footer = _styled.div.withConfig({\n  displayName: \"App__Footer\",\n  componentId: \"sc-64grnh-3\"\n})([\"height:90px;padding:10px 20px 10px 20px;display:flex;bottom:20px;background:\", \";@media only screen and (max-width:414px){height:154px;padding:5px;}\"], FOOTER_BACKGROUND);\n\nconst SearchDiv = _styled.div.withConfig({\n  displayName: \"App__SearchDiv\",\n  componentId: \"sc-64grnh-4\"\n})([\"width:80%;display:flex;margin-right:10px;margin-top:5px;justify-content:flex-start;@media only screen and (max-width:414px){margin-right:0px;width:initial;}\"]);\n\nconst LoginPanel = _styled.div.withConfig({\n  displayName: \"App__LoginPanel\",\n  componentId: \"sc-64grnh-5\"\n})([\"width:30%;display:flex;@media only screen and (max-width:414px){margin-left:-13px;width:initial;padding:2px;}\"]);\n\nconst CategoryDiv = _styled.div.withConfig({\n  displayName: \"App__CategoryDiv\",\n  componentId: \"sc-64grnh-6\"\n})([\"width:100%;display:flex;padding:5px 10px;@media only screen and (max-width:414px){padding:1px;justify-content:space-around;}\"]);\n\nconst Content = _styled.div.withConfig({\n  displayName: \"App__Content\",\n  componentId: \"sc-64grnh-7\"\n})([\"display:flex;border:1px solid \", \";@media only screen and (max-width:414px){height:initial;flex-direction:column;border:none;}\"], BORDER);\n\nconst Screen = _styled.div.withConfig({\n  displayName: \"App__Screen\",\n  componentId: \"sc-64grnh-8\"\n})([\"background:#ffffff;border-radius:4px;padding-bottom:24px;width:60%;@media only screen and (max-width:414px){padding-bottom:4px;width:100%;}\"]);\n\nconst ListBox = _styled.div.withConfig({\n  displayName: \"App__ListBox\",\n  componentId: \"sc-64grnh-9\"\n})([\"width:40%;background:\", \";display:flex;@media only screen and (max-width:414px){padding-bottom:4px;width:100%;}\"], BACKGROUND);\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/AVIA/Desktop/youTubeNew/myTubeFull/client/src/view/App.js"],"names":["React","useState","searchYoutube","VideoScreen","Search","LogIn","SignIn","VideoList","CategoryCreator","BACKGROUND","FOOTER_BACKGROUND","BORDER","useStore","login","logout","getCatagories","createCategory","KEY","process","env","REACT_APP_YOUTUBE_KEY","REACT_APP_YOUTUBE_KEY2","App","videos","setvideos","selectedVideo","setCatagories","catagories","setSelectedVideo","selectedCategory","setSelectedCategory","userProfile","isConnected","userToken","setUserToken","setIsConnected","setUserProfile","errMesg","setErrMesg","console","log","handleFetch","query","options","q","part","type","maxResults","length","result","items","e","error","code","alert","doLogIn","email","password","res","data","status","token","user","arr","cat_name","catArr","_id","message","doLogout","title","Page","styled","div","Logo","Header","Footer","SearchDiv","LoginPanel","CategoryDiv","Content","Screen","ListBox"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport searchYoutube from \"youtube-api-v3-search\";\r\nimport VideoScreen from \"./VideoScreen\";\r\nimport styled from \"styled-components/macro\";\r\nimport Search from \"./Search\";\r\nimport LogIn from \"./LogIn\";\r\nimport SignIn from \"./SignIn\";\r\nimport VideoList from \"./VideoList\";\r\nimport CategoryCreator from \"./CategoryCreator\";\r\nimport { BACKGROUND, FOOTER_BACKGROUND, BORDER } from \"../styles/colors\";\r\nimport { useStore } from \"../state/YouTube.store\";\r\nimport {\r\n  login,\r\n  logout,\r\n  getCatagories,\r\n  createCategory,\r\n} from \"../service/fetchApi\";\r\n\r\nconst KEY = process.env.REACT_APP_YOUTUBE_KEY||process.env.REACT_APP_YOUTUBE_KEY2;\r\n\r\nconst App = () => {\r\n  const {\r\n    videos,\r\n    setvideos,\r\n    selectedVideo,\r\n    setCatagories,\r\n    catagories,\r\n    setSelectedVideo,\r\n    selectedCategory,\r\n    setSelectedCategory,\r\n    userProfile,\r\n    isConnected,\r\n    userToken,\r\n    setUserToken,\r\n    setIsConnected,\r\n    setUserProfile,\r\n  } = useStore();\r\n\r\n  const [errMesg, setErrMesg] = useState(\"\");\r\n\r\n  console.log(KEY);\r\n  const handleFetch = async (query) => {\r\n    const options = {\r\n      q: query,\r\n      part: \"snippet\",\r\n      type: \"video\",\r\n      maxResults: 10,\r\n    };\r\n    console.log(query.length);\r\n    try {\r\n      if (query.length > 1) {\r\n        let result = await searchYoutube(KEY, options);\r\n        console.log(result)\r\n        setvideos(result.items);\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n      if (e.error.code === 403) {\r\n        alert(\"you exceeded your search try tomorrow \");\r\n      }\r\n    }\r\n  };\r\n\r\n  const doLogIn = async (email, password) => {\r\n    const res = await login(email, password);\r\n    if (res.data) {\r\n      const { data, status } = await res;\r\n      setUserToken(data.token);\r\n      setUserProfile({ ...data.user });\r\n      setIsConnected(status === 200);\r\n      setErrMesg(\"\");\r\n\r\n      const arr = await getCatagories(data.token);\r\n      if (arr.length === 0) {\r\n        await createCategory(data.token, {\r\n          cat_name: \"You Tube links\",\r\n          videos: [],\r\n        });\r\n      }\r\n\r\n      let catArr = await getCatagories(data.token);\r\n      setCatagories(catArr);\r\n      console.log(catArr);\r\n      setSelectedCategory(catArr[0]._id);\r\n      return true;\r\n    } else {\r\n      setErrMesg(res.message);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const doLogout = async () => {\r\n    await logout(userToken);\r\n    setIsConnected(false);\r\n    setUserToken(null);\r\n    setUserProfile(null);\r\n    setCatagories([]);\r\n  };\r\n\r\n  return (\r\n    <Page>\r\n      <Header>\r\n        <LoginPanel>\r\n          {isConnected ? null : (\r\n            <SignIn\r\n              {...{\r\n                doLogIn,\r\n                isConnected: false,\r\n                title: \"SignUp\",\r\n                setUserProfile,\r\n              }}\r\n            />\r\n          )}\r\n\r\n          <LogIn\r\n            {...{\r\n              userProfile,\r\n              isConnected,\r\n              userToken,\r\n              setUserToken,\r\n              setIsConnected,\r\n              setUserProfile,\r\n              doLogIn,\r\n              doLogout,\r\n              errMesg,\r\n            }}\r\n          />\r\n          {isConnected ? (\r\n            <SignIn\r\n              {...{\r\n                doLogIn,\r\n                isConnected: true,\r\n                title: \"edit profile\",\r\n                userProfile,\r\n                userToken,\r\n                setUserProfile,\r\n              }}\r\n            />\r\n          ) : null}\r\n        </LoginPanel>\r\n        <SearchDiv>\r\n          <Search videosQuery={videos} handleFormSubmit={handleFetch} />\r\n        </SearchDiv>\r\n\r\n        <Logo>\r\n          AviTube<span>everywhere</span>\r\n        </Logo>\r\n      </Header>\r\n      <Content>\r\n        <Screen>\r\n          <VideoScreen\r\n            {...{\r\n              selectedVideo,\r\n              setCatagories,\r\n              selectedCategory,\r\n              catagories,\r\n              userToken,\r\n              isConnected,\r\n            }}\r\n          ></VideoScreen>\r\n        </Screen>\r\n        <ListBox>\r\n          <VideoList\r\n            {...{\r\n              catagories,\r\n              setSelectedVideo,\r\n              setCatagories,\r\n              userToken,\r\n              isConnected,\r\n            }}\r\n          />\r\n        </ListBox>\r\n      </Content>\r\n      <Footer>\r\n        <CategoryDiv>\r\n          <CategoryCreator\r\n            {...{\r\n              catagories,\r\n              setCatagories,\r\n              selectedCategory,\r\n              setSelectedCategory,\r\n              userToken,\r\n              isConnected,\r\n              selectedVideo,\r\n            }}\r\n          />\r\n        </CategoryDiv>\r\n      </Footer>\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default App;\r\n\r\nconst Page = styled.div`\r\n  margin: 0px auto 0 auto;\r\n\r\n  height: 100%;\r\n  width: 1200px;\r\n  @media only screen and (max-width: 414px) {\r\n    width: 394px;\r\n  }\r\n  @media only screen and (max-width: 375px) {\r\n    width: 355px;\r\n  }\r\n  @media only screen and (max-width: 360px) {\r\n    width: 340px;\r\n  }\r\n`;\r\nconst Logo = styled.div`\r\n  padding: 10px;\r\n  font-family: fantasy;\r\n  letter-spacing: 5px;\r\n  color: red;\r\n  font-size: 30px;\r\n  span {\r\n    color: #000;\r\n  }\r\n  @media only screen and (max-width: 414px) {\r\n    display: flex;\r\n    flex-direction: column;\r\n    font-size: 0.55em;\r\n    letter-spacing: 1px;\r\n    padding: 3px;\r\n    padding-top: 10px;\r\n    font-weight: bold;\r\n    margin: 4px -1px 4px 2px;\r\n    padding-right: 10px;\r\n    line-height: 1;\r\n    font-family: monospace;\r\n    span {\r\n      color: #000;\r\n      font-size: 8px;\r\n      font-weight: normal;\r\n    }\r\n  }\r\n`;\r\nconst Header = styled.div`\r\n  height: 64px;\r\n  padding: 14px 20px 7px 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  @media only screen and (max-width: 414px) {\r\n    height: 50px;\r\n    padding: 10px 5px;\r\n    border-bottom: 1px solid ${BORDER};\r\n  }\r\n  @media only screen and (max-width: 360px) {\r\n  }\r\n`;\r\nconst Footer = styled.div`\r\n  height: 90px;\r\n  padding: 10px 20px 10px 20px;\r\n  display: flex;\r\n  bottom: 20px;\r\n  background: ${FOOTER_BACKGROUND};\r\n  @media only screen and (max-width: 414px) {\r\n    height: 154px;\r\n    padding: 5px;\r\n  }\r\n`;\r\nconst SearchDiv = styled.div`\r\n  width: 80%;\r\n  display: flex;\r\n  margin-right: 10px;\r\n  margin-top: 5px;\r\n  justify-content: flex-start;\r\n  @media only screen and (max-width: 414px) {\r\n    margin-right: 0px;\r\n    width: initial;\r\n  }\r\n`;\r\nconst LoginPanel = styled.div`\r\n  width: 30%;\r\n  display: flex;\r\n  @media only screen and (max-width: 414px) {\r\n    margin-left: -13px;\r\n    width: initial;\r\n    padding: 2px;\r\n  }\r\n`;\r\nconst CategoryDiv = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  padding: 5px 10px;\r\n  @media only screen and (max-width: 414px) {\r\n    padding: 1px;\r\n    justify-content: space-around;\r\n  }\r\n`;\r\nconst Content = styled.div`\r\n  display: flex;\r\n  border: 1px solid ${BORDER};\r\n\r\n  @media only screen and (max-width: 414px) {\r\n    height: initial;\r\n    flex-direction: column;\r\n    border:none;\r\n  }\r\n`;\r\nconst Screen = styled.div`\r\n  background: #ffffff;\r\n  border-radius: 4px;\r\n  padding-bottom: 24px;\r\n  width: 60%;\r\n  @media only screen and (max-width: 414px) {\r\n    padding-bottom: 4px;\r\n    width: 100%;\r\n  }\r\n`;\r\nconst ListBox = styled.div`\r\n  width: 40%;\r\n  background: ${BACKGROUND};\r\n  display: flex;\r\n  @media only screen and (max-width: 414px) {\r\n    padding-bottom: 4px;\r\n    width: 100%;\r\n  }\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}